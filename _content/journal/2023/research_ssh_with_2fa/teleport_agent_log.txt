$ awwan play _vm/ops/test.internal/51_teleport_agent.aww 1-
--- BaseDir: <REDACTED>
--- Loading "awwan.env" ...
--- Loading "_vm/ops/test.internal/awwan.env" ...
--- SSH connection: shulhan@test.internal:22
--- SSH identity file: [<REDACTED>/shulhan@vpn.internal]

--> shulhan@test.internal:22:   1: sudo pacman -Sy --noconfirm teleport-bin
:: Synchronizing package databases...
 core downloading...
 extra downloading...
 build.kilabit.info downloading...
 gce downloading...
resolving dependencies...
looking for conflicting packages...

Package (1)                      New Version  Net Change  Download Size

build.kilabit.info/teleport-bin  14.1.0-1     527.39 MiB     135.74 MiB

Total Download Size:   135.74 MiB
Total Installed Size:  527.39 MiB

:: Proceed with installation? [Y/n]
:: Retrieving packages...
 teleport-bin-14.1.0-1-x86_64 downloading...
checking keyring...
checking package integrity...
loading package files...
checking for file conflicts...
checking available disk space...
:: Processing package changes...
installing teleport-bin...
Please follow the instructions on https://gravitational.com/teleport/docs/quickstart/ to set things up.
:: Running post-transaction hooks...
(1/2) Reloading system manager configuration...
(2/2) Arming ConditionNeedsUpdate...

--> shulhan@test.internal:22:   3: #local: tctl tokens add --type=node --format=text > <REDACTED>/test.internal/teleport.token

--> shulhan@test.internal:22:   6: #put! <REDACTED>/test.internal/teleport.token /root/teleport.token

--> shulhan@test.internal:22:   8: sudo teleport node configure --output=file:///etc/teleport.yaml --token=/root/teleport.token --proxy=10.184.0.8:3443

A Teleport configuration file has been created at "/etc/teleport.yaml".
To start Teleport with this configuration file, run:

sudo teleport start --config="/etc/teleport.yaml"

Note that starting a Teleport server with this configuration will require root access as:
- The Teleport configuration is located at "/etc/teleport.yaml".
- Teleport will be storing data at "/var/lib/teleport". To change that, run "teleport configure" with the "--data-dir" flag.

Happy Teleporting!

--> shulhan@test.internal:22:  13: sudo mkdir -p /etc/teleport

--> shulhan@test.internal:22:  14: sudo mkdir -p /var/lib/teleport

--> shulhan@test.internal:22:  16: #put!root:root+600 <REDACTED>/test.internal/etc/systemd/system/teleport.service /etc/systemd/system/teleport.service

--> shulhan@test.internal:22:  19: sudo systemctl enable teleport.service
Created symlink /etc/systemd/system/multi-user.target.wants/teleport.service â†’ /etc/systemd/system/teleport.service.

--> shulhan@test.internal:22:  20: sudo systemctl restart teleport.service
